{"ast":null,"code":"import { combineLatest, of } from \"rxjs\";\nimport { switchMap, tap } from \"rxjs/operators\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../dropdown.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"../dropdown-segment/dropdown-segment.component\";\n\nconst _c0 = function () {\n  return [];\n};\n\nfunction DropdownSegmentsWrapperComponent_ng_container_1_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"app-dropdown-segment\", 3);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const combo_r3 = ctx.$implicit;\n    const filteredList_r1 = i0.ɵɵnextContext().ngIf;\n    const ctx_r2 = i0.ɵɵnextContext();\n    let tmp_1_0;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"comboComponent\", combo_r3)(\"dataList\", (tmp_1_0 = ctx_r2.getItemsByType(filteredList_r1.items, combo_r3.getType())) !== null && tmp_1_0 !== undefined ? tmp_1_0 : i0.ɵɵpureFunction0(2, _c0));\n  }\n}\n\nfunction DropdownSegmentsWrapperComponent_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, DropdownSegmentsWrapperComponent_ng_container_1_div_1_Template, 2, 3, \"div\", 2);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    let tmp_0_0;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", (tmp_0_0 = ctx_r0.comboComponents) !== null && tmp_0_0 !== undefined ? tmp_0_0 : i0.ɵɵpureFunction0(1, _c0));\n  }\n}\n\nexport class DropdownSegmentsWrapperComponent {\n  constructor(dropdownService) {\n    this.dropdownService = dropdownService;\n    this.comboComponents = [];\n    this.dataList$ = dropdownService.dataList$;\n    this.search$ = dropdownService.search;\n  }\n\n  ngOnInit() {}\n\n  ngOnChanges(changes) {\n    var _a;\n\n    if ((_a = this.comboComponents) === null || _a === void 0 ? void 0 : _a.length) {\n      this.filteredList$ = this.getList();\n    }\n  }\n\n  getList() {\n    var _a;\n\n    if (!((_a = this.comboComponents) === null || _a === void 0 ? void 0 : _a.length)) return of({\n      items: [],\n      search: {\n        searchString: '',\n        key: ''\n      }\n    });\n    return combineLatest([this.dataList$, this.search$]).pipe(switchMap(([items, search]) => {\n      if (!search.searchString) {\n        let result = {\n          items: items,\n          search\n        };\n        return of(result);\n      }\n\n      let filterList = items.filter(item => {\n        var _a, _b;\n\n        let comboComp = (_a = this.comboComponents) === null || _a === void 0 ? void 0 : _a.find(combo => combo.getType().name == item.__type); // @ts-ignore\n\n        if (comboComp) return (_b = item[comboComp.getSelectValue()]) === null || _b === void 0 ? void 0 : _b.toString().includes(search.searchString);\n      });\n      let filteredResult = {\n        items: search.searchString.length > 0 ? filterList : items,\n        search\n      };\n      return of(filteredResult);\n    }), tap(({\n      items,\n      search\n    }) => {\n      var _a;\n\n      if (items.length == 1) {\n        let item = items[0];\n        let comboComp = (_a = this.comboComponents) === null || _a === void 0 ? void 0 : _a.find(combo => combo.getType().name == item.__type);\n\n        if (comboComp && search.key) {\n          let selectedItem = {\n            inputStr: item[comboComp.getSelectValue()],\n            item: item\n          };\n          this.dropdownService.selectItem(selectedItem);\n        }\n      }\n    }));\n  }\n\n  getItemsByType(filteredList, type) {\n    if (!(filteredList === null || filteredList === void 0 ? void 0 : filteredList.length)) return [];\n    return filteredList.filter(item => item.__type == type.name);\n  }\n\n}\n\nDropdownSegmentsWrapperComponent.ɵfac = function DropdownSegmentsWrapperComponent_Factory(t) {\n  return new (t || DropdownSegmentsWrapperComponent)(i0.ɵɵdirectiveInject(i1.DropdownService));\n};\n\nDropdownSegmentsWrapperComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: DropdownSegmentsWrapperComponent,\n  selectors: [[\"app-dropdown-segments-wrapper\"]],\n  inputs: {\n    comboComponents: [\"combos\", \"comboComponents\"]\n  },\n  features: [i0.ɵɵNgOnChangesFeature],\n  decls: 3,\n  vars: 3,\n  consts: [[1, \"container\"], [4, \"ngIf\"], [4, \"ngFor\", \"ngForOf\"], [3, \"comboComponent\", \"dataList\"]],\n  template: function DropdownSegmentsWrapperComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵtemplate(1, DropdownSegmentsWrapperComponent_ng_container_1_Template, 2, 2, \"ng-container\", 1);\n      i0.ɵɵpipe(2, \"async\");\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(2, 1, ctx.filteredList$));\n    }\n  },\n  directives: [i2.NgIf, i2.NgForOf, i3.DropdownSegmentComponent],\n  pipes: [i2.AsyncPipe],\n  styles: [\".container[_ngcontent-%COMP%] {\\n  width: 350px;\\n  max-width: 550px;\\n  max-height: 500px;\\n  overflow-y: auto;\\n  box-shadow: 1px 1px 8px -1px rgba(128, 128, 128, 0.4);\\n  border-radius: 4px;\\n  position: relative;\\n  z-index: 20;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRyb3Bkb3duLXNlZ21lbnRzLXdyYXBwZXIuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLFlBQVk7RUFDWixnQkFBZ0I7RUFDaEIsaUJBQWlCO0VBQ2pCLGdCQUFnQjtFQUNoQixxREFBcUQ7RUFDckQsa0JBQWtCO0VBQ2xCLGtCQUFrQjtFQUNsQixXQUFXO0FBQ2IiLCJmaWxlIjoiZHJvcGRvd24tc2VnbWVudHMtd3JhcHBlci5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmNvbnRhaW5lciB7XG4gIHdpZHRoOiAzNTBweDtcbiAgbWF4LXdpZHRoOiA1NTBweDtcbiAgbWF4LWhlaWdodDogNTAwcHg7XG4gIG92ZXJmbG93LXk6IGF1dG87XG4gIGJveC1zaGFkb3c6IDFweCAxcHggOHB4IC0xcHggcmdiYSgxMjgsIDEyOCwgMTI4LCAwLjQpO1xuICBib3JkZXItcmFkaXVzOiA0cHg7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgei1pbmRleDogMjA7XG59XG4iXX0= */\"]\n});","map":{"version":3,"sources":["/Users/razearmin/Desktop/combo-dropdown/src/app/dropdown/dropdown-segments-wrapper/dropdown-segments-wrapper.component.ts"],"names":["combineLatest","of","switchMap","tap","i0","i1","i2","i3","_c0","DropdownSegmentsWrapperComponent_ng_container_1_div_1_Template","rf","ctx","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","combo_r3","$implicit","filteredList_r1","ɵɵnextContext","ngIf","ctx_r2","tmp_1_0","ɵɵadvance","ɵɵproperty","getItemsByType","items","getType","undefined","ɵɵpureFunction0","DropdownSegmentsWrapperComponent_ng_container_1_Template","ɵɵelementContainerStart","ɵɵtemplate","ɵɵelementContainerEnd","ctx_r0","tmp_0_0","comboComponents","DropdownSegmentsWrapperComponent","constructor","dropdownService","dataList$","search$","search","ngOnInit","ngOnChanges","changes","_a","length","filteredList$","getList","searchString","key","pipe","result","filterList","filter","item","_b","comboComp","find","combo","name","__type","getSelectValue","toString","includes","filteredResult","selectedItem","inputStr","selectItem","filteredList","type","ɵfac","DropdownSegmentsWrapperComponent_Factory","t","ɵɵdirectiveInject","DropdownService","ɵcmp","ɵɵdefineComponent","selectors","inputs","features","ɵɵNgOnChangesFeature","decls","vars","consts","template","DropdownSegmentsWrapperComponent_Template","ɵɵpipe","ɵɵpipeBind1","directives","NgIf","NgForOf","DropdownSegmentComponent","pipes","AsyncPipe","styles"],"mappings":"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","sourcesContent":["import { combineLatest, of } from \"rxjs\";\nimport { switchMap, tap, } from \"rxjs/operators\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../dropdown.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"../dropdown-segment/dropdown-segment.component\";\nconst _c0 = function () { return []; };\nfunction DropdownSegmentsWrapperComponent_ng_container_1_div_1_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"app-dropdown-segment\", 3);\n    i0.ɵɵelementEnd();\n} if (rf & 2) {\n    const combo_r3 = ctx.$implicit;\n    const filteredList_r1 = i0.ɵɵnextContext().ngIf;\n    const ctx_r2 = i0.ɵɵnextContext();\n    let tmp_1_0;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"comboComponent\", combo_r3)(\"dataList\", (tmp_1_0 = ctx_r2.getItemsByType(filteredList_r1.items, combo_r3.getType())) !== null && tmp_1_0 !== undefined ? tmp_1_0 : i0.ɵɵpureFunction0(2, _c0));\n} }\nfunction DropdownSegmentsWrapperComponent_ng_container_1_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, DropdownSegmentsWrapperComponent_ng_container_1_div_1_Template, 2, 3, \"div\", 2);\n    i0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    let tmp_0_0;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", (tmp_0_0 = ctx_r0.comboComponents) !== null && tmp_0_0 !== undefined ? tmp_0_0 : i0.ɵɵpureFunction0(1, _c0));\n} }\nexport class DropdownSegmentsWrapperComponent {\n    constructor(dropdownService) {\n        this.dropdownService = dropdownService;\n        this.comboComponents = [];\n        this.dataList$ = dropdownService.dataList$;\n        this.search$ = dropdownService.search;\n    }\n    ngOnInit() {\n    }\n    ngOnChanges(changes) {\n        var _a;\n        if ((_a = this.comboComponents) === null || _a === void 0 ? void 0 : _a.length) {\n            this.filteredList$ = this.getList();\n        }\n    }\n    getList() {\n        var _a;\n        if (!((_a = this.comboComponents) === null || _a === void 0 ? void 0 : _a.length))\n            return of({ items: [], search: { searchString: '', key: '' } });\n        return combineLatest([this.dataList$, this.search$])\n            .pipe(switchMap(([items, search]) => {\n            if (!search.searchString) {\n                let result = { items: items, search };\n                return of(result);\n            }\n            let filterList = items.filter(item => {\n                var _a, _b;\n                let comboComp = (_a = this.comboComponents) === null || _a === void 0 ? void 0 : _a.find(combo => combo.getType().name == item.__type);\n                // @ts-ignore\n                if (comboComp)\n                    return (_b = item[comboComp.getSelectValue()]) === null || _b === void 0 ? void 0 : _b.toString().includes(search.searchString);\n            });\n            let filteredResult = { items: search.searchString.length > 0 ? filterList : items, search };\n            return of(filteredResult);\n        }), tap(({ items, search }) => {\n            var _a;\n            if (items.length == 1) {\n                let item = items[0];\n                let comboComp = (_a = this.comboComponents) === null || _a === void 0 ? void 0 : _a.find(combo => combo.getType().name == item.__type);\n                if (comboComp && search.key) {\n                    let selectedItem = { inputStr: item[comboComp.getSelectValue()], item: item };\n                    this.dropdownService.selectItem(selectedItem);\n                }\n            }\n        }));\n    }\n    getItemsByType(filteredList, type) {\n        if (!(filteredList === null || filteredList === void 0 ? void 0 : filteredList.length))\n            return [];\n        return filteredList\n            .filter(item => item.__type == type.name);\n    }\n}\nDropdownSegmentsWrapperComponent.ɵfac = function DropdownSegmentsWrapperComponent_Factory(t) { return new (t || DropdownSegmentsWrapperComponent)(i0.ɵɵdirectiveInject(i1.DropdownService)); };\nDropdownSegmentsWrapperComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: DropdownSegmentsWrapperComponent, selectors: [[\"app-dropdown-segments-wrapper\"]], inputs: { comboComponents: [\"combos\", \"comboComponents\"] }, features: [i0.ɵɵNgOnChangesFeature], decls: 3, vars: 3, consts: [[1, \"container\"], [4, \"ngIf\"], [4, \"ngFor\", \"ngForOf\"], [3, \"comboComponent\", \"dataList\"]], template: function DropdownSegmentsWrapperComponent_Template(rf, ctx) { if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵtemplate(1, DropdownSegmentsWrapperComponent_ng_container_1_Template, 2, 2, \"ng-container\", 1);\n        i0.ɵɵpipe(2, \"async\");\n        i0.ɵɵelementEnd();\n    } if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(2, 1, ctx.filteredList$));\n    } }, directives: [i2.NgIf, i2.NgForOf, i3.DropdownSegmentComponent], pipes: [i2.AsyncPipe], styles: [\".container[_ngcontent-%COMP%] {\\n  width: 350px;\\n  max-width: 550px;\\n  max-height: 500px;\\n  overflow-y: auto;\\n  box-shadow: 1px 1px 8px -1px rgba(128, 128, 128, 0.4);\\n  border-radius: 4px;\\n  position: relative;\\n  z-index: 20;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRyb3Bkb3duLXNlZ21lbnRzLXdyYXBwZXIuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLFlBQVk7RUFDWixnQkFBZ0I7RUFDaEIsaUJBQWlCO0VBQ2pCLGdCQUFnQjtFQUNoQixxREFBcUQ7RUFDckQsa0JBQWtCO0VBQ2xCLGtCQUFrQjtFQUNsQixXQUFXO0FBQ2IiLCJmaWxlIjoiZHJvcGRvd24tc2VnbWVudHMtd3JhcHBlci5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmNvbnRhaW5lciB7XG4gIHdpZHRoOiAzNTBweDtcbiAgbWF4LXdpZHRoOiA1NTBweDtcbiAgbWF4LWhlaWdodDogNTAwcHg7XG4gIG92ZXJmbG93LXk6IGF1dG87XG4gIGJveC1zaGFkb3c6IDFweCAxcHggOHB4IC0xcHggcmdiYSgxMjgsIDEyOCwgMTI4LCAwLjQpO1xuICBib3JkZXItcmFkaXVzOiA0cHg7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgei1pbmRleDogMjA7XG59XG4iXX0= */\"] });\n"]},"metadata":{},"sourceType":"module"}